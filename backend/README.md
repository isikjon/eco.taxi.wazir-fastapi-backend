# Taxi 2.0 - Суперадмин Панель

## Описание
Веб-приложение для управления такси-сервисом с панелью суперадмина.

## Структура проекта
```
taxi_2.0/
├── app/
│   ├── api/
│   │   ├── auth/          # Роуты аутентификации
│   │   └── superadmin/    # Роуты суперадмина
│   ├── core/              # Конфигурация и безопасность
│   ├── database/          # База данных
│   ├── models/            # Модели данных
│   ├── schemas/           # Pydantic схемы
│   └── services/          # Бизнес-логика
├── templates/             # HTML шаблоны
├── static/                # Статические файлы
├── main.py               # Главный файл приложения
└── requirements.txt       # Зависимости
```

## Установка и запуск

### 1. Активация виртуального окружения
```bash
# Windows
venv\Scripts\activate

# Linux/Mac
source venv/bin/activate
```

### 2. Установка зависимостей
```bash
pip install -r requirements.txt
```

### 3. Запуск приложения
```bash
python main.py
```

Приложение будет доступно по адресу: `http://localhost:8000`

## Доступ к панели суперадмина

### URL: `http://localhost:8000/superadmin/login`

### Данные для входа:
- **Логин:** Alexander
- **Пароль:** 123

## API Endpoints

### Аутентификация (`/auth`)
- `GET /auth/health` - Проверка здоровья сервиса
- `POST /auth/superadmin/login` - Вход суперадмина

### Суперадмин (`/superadmin`)
- `GET /superadmin/login` - Страница входа
- `GET /superadmin/dashboard` - Главная панель
- `GET /superadmin/users` - Управление пользователями
- `GET /superadmin/drivers` - Управление водителями
- `GET /superadmin/orders` - Управление заказами
- `GET /superadmin/analytics` - Аналитика
- `GET /superadmin/settings` - Настройки
- `GET /superadmin/taxiparks` - Управление таксопарками
- `GET /superadmin/admins` - Управление администраторами

### Системные
- `GET /` - Редирект на страницу входа
- `GET /health` - Проверка здоровья приложения
- `GET /debug/routes` - Отладка роутов
- `GET /test/auth` - Тест auth роутера

## Тестирование

### Запуск тестов
```bash
python test_auth.py
```

### Ручное тестирование через браузер
1. Откройте `http://localhost:8000/superadmin/login`
2. Введите логин: `Alexander` и пароль: `123`
3. Нажмите "Войти как суперадмин"
4. Должен произойти редирект на `/superadmin/dashboard`

## Отладка

### Просмотр всех роутов
```bash
curl http://localhost:8000/debug/routes
```

### Логирование
Все HTTP запросы логируются в консоль с подробной информацией.

## Решение проблем

### Ошибка "Not Found"
- Убедитесь, что сервер запущен
- Проверьте, что все роутеры подключены корректно
- Проверьте консоль сервера на наличие ошибок

### Проблемы с аутентификацией
- Проверьте, что auth роутер доступен по `/auth`
- Убедитесь, что используются правильные данные для входа
- Проверьте консоль браузера на наличие ошибок

## Разработка

### Добавление новых роутов
1. Создайте роутер в соответствующей папке `app/api/`
2. Импортируйте роутер в `main.py`
3. Подключите роутер через `app.include_router()`

### Изменение схем данных
1. Обновите соответствующие файлы в `app/schemas/`
2. Обновите роутеры для использования новых схем
3. Протестируйте изменения

## Безопасность
- В продакшене измените логин и пароль суперадмина
- Используйте HTTPS
- Добавьте rate limiting
- Реализуйте JWT токены с истечением срока действия
# new.taxi.wazir-fastapi
